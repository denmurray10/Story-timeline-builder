{% extends 'timeline/base.html' %} {% block title %}{{ event.title }} - Story
Timeline Builder{% endblock %} {% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h1><i class="bi bi-calendar-event"></i> {{ event.title }}</h1>
    <div>
        <a href="{% url 'event_edit' event.pk %}" class="btn btn-secondary">
            <i class="bi bi-pencil"></i> Edit
        </a>
        <a href="{% url 'event_delete' event.pk %}" class="btn btn-danger">
            <i class="bi bi-trash"></i> Delete
        </a>
    </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-file-text"></i> Event Details
            </div>
            <div class="card-body">
                <h5>Description</h5>
                <p>{{ event.description }}</p>

                <hr />

                <div class="row">
                    <div class="col-md-6">
                        <p>
                            <strong>Book:</strong>
                            {% if event.book %}
                            <a href="{% url 'book_detail' event.book.pk %}"
                                >{{ event.book.title }}</a
                            >
                            {% else %} Not assigned {% endif %}
                        </p>
                        <p>
                            <strong>Chapter:</strong>
                            {% if event.chapter %} Chapter {{
                            event.chapter.chapter_number }}: {{
                            event.chapter.title }} {% else %} Not assigned {%
                            endif %}
                        </p>
                        <p>
                            <strong>Sequence Order:</strong> {{
                            event.sequence_order }}
                        </p>
                        <p>
                            <strong>Chronological Order:</strong> {{
                            event.chronological_order }}
                        </p>
                    </div>
                    <div class="col-md-6">
                        <p>
                            <strong>Location:</strong> {{
                            event.location|default:"Not specified" }}
                        </p>
                        <p>
                            <strong>Story Date:</strong> {{
                            event.story_date|default:"Not specified" }}
                        </p>
                        <p>
                            <strong>Emotional Tone:</strong> {{
                            event.get_emotional_tone_display }}
                        </p>
                        <p>
                            <strong>Story Beat:</strong> {{
                            event.get_story_beat_display|default:"Not specified"
                            }}
                        </p>
                    </div>
                </div>

                <hr />

                <p>
                    <strong>Tension Level:</strong>
                    <span
                        class="tension-indicator tension-{% if event.tension_level <= 3 %}low{% elif event.tension_level <= 7 %}medium{% else %}high{% endif %}"
                    ></span>
                    {{ event.tension_level }}/10
                </p>

                <p><strong>Word Count:</strong> {{ event.word_count }} words</p>

                <p>
                    <strong>Status:</strong>
                    {% if event.is_written %}
                    <span class="badge bg-success">Written</span>
                    {% else %}
                    <span class="badge bg-warning">Not Written</span>
                    {% endif %}
                </p>

                {% if event.notes %}
                <hr />
                <h6>Notes</h6>
                <p>{{ event.notes }}</p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <!-- POV Character -->
        <div class="card mb-3">
            <div class="card-header">
                <i class="bi bi-eye"></i> POV Character
            </div>
            <div class="card-body">
                {% if event.pov_character %}
                <div class="d-flex align-items-center">
                    <div
                        class="character-badge"
                        style="background-color: {{ event.pov_character.color_code }}; width: 40px; height: 40px; border-radius: 50%;"
                    ></div>
                    <div class="ms-3">
                        <a
                            href="{% url 'character_detail' event.pov_character.pk %}"
                            class="text-decoration-none"
                        >
                            {{ event.pov_character.name }}
                        </a>
                    </div>
                </div>
                {% else %}
                <p class="text-muted mb-0">No POV character assigned</p>
                {% endif %}
            </div>
        </div>

        <!-- Characters Involved -->
        <div class="card mb-3">
            <div class="card-header">
                <i class="bi bi-people"></i> Characters Involved
            </div>
            <div class="card-body">
                {% if event.characters.all %} {% for character in
                event.characters.all %}
                <div class="d-flex align-items-center mb-2">
                    <div
                        class="character-badge"
                        style="background-color: {{ character.color_code }}; width: 30px; height: 30px; border-radius: 50%;"
                    ></div>
                    <div class="ms-2">
                        <a
                            href="{% url 'character_detail' character.pk %}"
                            class="text-decoration-none"
                        >
                            {{ character.name }}
                        </a>
                    </div>
                </div>
                {% endfor %} {% else %}
                <p class="text-muted mb-0">No characters assigned</p>
                {% endif %}
            </div>
        </div>

        <!-- Tags -->
        <div class="card">
            <div class="card-header"><i class="bi bi-tags"></i> Tags</div>
            <div class="card-body">
                {% if event.tags.all %} {% for tag in event.tags.all %}
                <span
                    class="tag-badge"
                    style="background-color: {{ tag.color }};"
                >
                    {{ tag.name }}
                </span>
                {% endfor %} {% else %}
                <p class="text-muted mb-0">No tags assigned</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
